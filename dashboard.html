<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Agent Dashboard</title>
  <style>
    body { background: #0d0d0d; color: #00ffcc; font-family: monospace; margin: 0; padding: 0; }
    header { background: #000; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center;}
    .menu-toggle { background: #00ffcc; color: #000; border: none; padding: 8px 16px; margin-left: 10px; cursor: pointer; }
    #wallet { font-weight: bold; }
    .side-menu { position: fixed; top: 0; right: -360px; width: 360px; height: 100%; background: #000; border-left:2px solid #00ffcc; padding:20px; transition:right .3s ease; overflow-y:auto; z-index: 10; }
    .side-menu.open { right: 0; }
    .close-btn { float:right; background:none; border:none; color:#00ffcc; font-size:1.2rem; cursor:pointer; }
    .tabs { display:flex; margin-bottom:10px; }
    .tab { flex:1; text-align:center; padding:8px; background:#111; cursor:pointer; }
    .tab.active { background:#00ffcc; color:#000; }
    .section-box, .card { padding:20px; max-width:600px; margin:20px auto; background:rgba(0,255,204,0.05); border:1px solid #00ffcc; }
    .card { margin:10px; }
    button { background:#00ffcc; color:#000; border:none; padding:8px 16px; margin:6px; cursor:pointer; }
    button:hover { background:#00ccb3; }
    input { padding:6px; width:80%; margin:6px 0; }
    #statusOverlay { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); color:#00ffcc; display:none; align-items:center; justify-content:center; font-size:1.2rem; text-align:center; z-index:9999; }
  </style>
</head>
<body>
  <header>
    <h2>üïµÔ∏è Agent Dashboard</h2>
    <div>
      <span id="wallet">üí∞ ‚Ç¨0</span>
      <button class="menu-toggle" onclick="toggleMenu()">‚ò∞ Menu</button>
      <button class="menu-toggle" onclick="showStocks()">üìà Invest</button>
      <button class="menu-toggle" onclick="showMission()">üéØ Mission</button>
      <button class="menu-toggle" onclick="showRecruit()">üßë Recruit</button>
      <button class="menu-toggle" onclick="showShop()">üõí Shop</button>
    </div>
  </header>

  <div id="menuPanel" class="side-menu">
    <button class="close-btn" onclick="toggleMenu()">√ó</button>
    <h3>‚úÖ Missions</h3><div id="missionsList"></div><hr>
    <h3>üßë Recruits</h3><div id="recruitsList"></div>
  </div>

  <div id="shopPanel" class="side-menu">
    <button class="close-btn" onclick="closeShop()">√ó</button>
    <div class="tabs">
      <div class="tab active" id="tab-Cars" onclick="selectTab('Cars')">Cars</div>
      <div class="tab" id="tab-Houses" onclick="selectTab('Houses')">Houses</div>
      <div class="tab" id="tab-Weapons" onclick="selectTab('Weapons')">Weapons</div>
    </div>
    <div id="shopContent"></div>
  </div>

  <div id="mainContent">
    <div id="missionBox" class="section-box"></div>
    <div id="recruitBox" class="section-box"></div>
    <div id="stockBox" class="section-box"></div>
  </div>

  <div id="statusOverlay"></div>

  <script>
    let wallet = 100000, missions = [], recruits = [], shopItems = { Cars: [], Houses: [], Weapons: [] };
    let currentMission = null, currentRecruit = null, currentStock = null;
    let shopTab = "Cars", restockTimers = {};
    let pcCount = 0;

    const missionTemplates = [...];
    const stockNames = [...];
    const carNames = [...], houseNames = [...], weaponNames = [...];

    function random(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }

    function loadState(){
      const d = JSON.parse(localStorage.getItem("agentDash")||"{}");
      wallet = d.wallet ?? wallet;
      missions = d.missions || missions;
      recruits = d.recruits || recruits;
      shopItems = d.shopItems || shopItems;
      pcCount = d.pcCount || 0;
    }
    function saveState(){
      localStorage.setItem("agentDash", JSON.stringify({ wallet, missions, recruits, shopItems, pcCount }));
    }
    function updateWallet(){
      document.getElementById("wallet").textContent = `üí∞ ‚Ç¨${wallet.toLocaleString()}`; saveState();
    }

    // Crypto mining
    function startMining(){
      setInterval(() => {
        if(pcCount>0){
          wallet += pcCount * 1000;
          updateWallet();
        }
      }, 1000);
    }

    // Setup on load
    loadState();
    updateWallet();
    renderLists();
    showMission();
    showRecruit();
    startMining();

    // (rest of your code remains the same, with one new buyItem condition:)

    function buyItem(cat,i){
      const it = shopItems[cat][i];
      if(wallet < it.cost) return alert("Insufficient funds.");
      wallet -= it.cost;
      if(it.name === "Crypto PC") pcCount++;
      showOverlay(`üëç Bought ${it.name} for ‚Ç¨${it.cost.toLocaleString()}`, ()=>{
        updateWallet();
        shopItems[cat].splice(i,1);
        saveState();
        renderShop();
      });
    }

    function generateShop(cat){
      shopItems[cat] = Array.from({ length: 5 }, (_, i) => {
        let name, cost;
        if(cat === "Weapons"){
          name = (i === 0 ? "Crypto PC" : weaponNames[random(0,weaponNames.length-1)]) + " " + (i+1);
          cost = (name.startsWith("Crypto") ? 30000 : random(10000, 100000));
        } else {
          // same as before for cars and houses
          name = (cat==="Cars"?carNames:houseNames)[random(0,(cat==="Cars"?carNames:houseNames).length-1)] + " " + (i+1);
          cost = cat==="Cars"?random(100000,2000000):random(500000,5000000);
        }
        return { name, cost };
      });
      clearTimeout(restockTimers[cat]);
      restockTimers[cat] = null;
      saveState();
    }

    // rest of the shop, missions, recruits, overlay logic unchanged
  </script>
</body>
</html>