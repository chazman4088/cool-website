<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Agent Dashboard</title>
  <style>
    body { background: #0d0d0d; color: #00ffcc; font-family: 'Courier New', Courier, monospace; margin: 0; padding: 0; }
    header { background: #000; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #00ffcc; }
    .menu-toggle { background: #00ffcc; color: #000; border: none; padding: 10px; font-weight: bold; cursor: pointer; margin: 5px; }
    .main-content { padding: 40px 20px; text-align: center; }
    .wallet { font-size: 1.2rem; margin-bottom: 20px; }
    button { background: #00ffcc; color: #000; border: none; padding: 10px 20px; font-weight: bold; cursor: pointer; margin: 10px; }
    button:hover { background: #00ccb3; }
    .side-menu { position: fixed; top: 0; right: -300px; width: 300px; height: 100%; background: #000; border-left: 2px solid #00ffcc; padding: 20px; transition: right 0.3s ease; overflow-y: auto; z-index: 1000; }
    .side-menu.open { right: 0; }
    .close-btn { background: none; border: none; color: #00ffcc; font-size: 1.5em; cursor: pointer; float: right; margin-bottom: 10px; }
    .accepted-mission, .hired-agent { border: 1px solid #00ffcc; padding: 10px; margin-bottom: 10px; background: rgba(0,255,204,0.05); }
    details summary { cursor: pointer; }
    .status { margin-top: 10px; }
    #statusOverlay { position: fixed; top: 0; left: 0; height: 100%; width: 100%; background: rgba(0,0,0,0.95); color: #00ffcc; font-size: 2rem; font-weight: bold; display: none; justify-content: center; align-items: center; text-align: center; z-index: 2000; }
    #recruitContainer { margin-top: 30px; border-top: 1px solid #00ffcc; padding-top: 20px; }
  </style>
</head>
<body>
  <header>
    <h2>üïµÔ∏è Agent CH Dashboard</h2>
    <div>
      <button class="menu-toggle" onclick="toggleMenu()">‚ò∞ View Missions / Team</button>
    </div>
  </header>

  <div class="side-menu" id="sideMenu">
    <button class="close-btn" onclick="toggleMenu()">‚Üê</button>
    <h3>üíº Agent Wallet</h3>
    <p id="walletDisplay"></p>
    <hr>
    <h3>‚úÖ Accepted Missions</h3>
    <div id="acceptedMissionsList"></div>
    <hr>
    <h3>üßë‚Äçüíª Hired Agents</h3>
    <div id="hiredAgentsList"></div>
  </div>

  <div class="main-content">
    <p class="wallet">Wallet: <strong id="walletLabel">‚Ç¨0</strong></p>
    <div id="missionBox"></div>
    <button onclick="showMission()">üéØ Request Mission</button>
    <button onclick="showRecruit()">üë• Hire Team</button>
    <div id="recruitContainer"></div>
  </div>

  <div id="statusOverlay"></div>

  <script>
    const missions = [ "Intercept enemy transmission", "Surveil high-value target", "Extract compromised agent", "Infiltrate secure facility", "Plant tracking device", "Retrieve encrypted data", "Neutralize rogue operative", "Secure secret package" ];
    const missionDetails = [ "Location: Classified coordinates", "Timeframe: Within 24 hours", "Contact: Agent X", "Risk Level: High", "Backup: Not available", "Transport: Stealth vehicle", "Objective: Capture, not kill", "Duration: Approx. 3 hours" ];
    const names = ["Shadow","Ghost","Blaze","Viper","Nova","Wraith","Echo"];
    const locations = ["London","Berlin","Tokyo","Paris","New York","Dubai","Moscow"];
    const expertise = ["Assassination","Stealth","Hacking"];
    let wallet = 100000, acceptedMissions = [], hiredAgents = [], currentRecruit = null;

    function loadState() {
      const w = localStorage.getItem("wallet"); if (w) wallet = Number(w);
      const aM = localStorage.getItem("acceptedMissions"); if (aM) acceptedMissions = JSON.parse(aM);
      const hA = localStorage.getItem("hiredAgents"); if (hA) hiredAgents = JSON.parse(hA);
    }
    function saveState() {
      localStorage.setItem("wallet", wallet);
      localStorage.setItem("acceptedMissions", JSON.stringify(acceptedMissions));
      localStorage.setItem("hiredAgents", JSON.stringify(hiredAgents));
      renderWallet(); updateAcceptedMissions(); updateHiredAgents();
    }

    function renderWallet() {
      document.getElementById("walletLabel").textContent = `‚Ç¨${wallet.toLocaleString()}`;
      document.getElementById("walletDisplay").textContent = `‚Ç¨${wallet.toLocaleString()}`;
    }

    function toggleMenu() {
      document.getElementById('sideMenu').classList.toggle('open');
      renderWallet(); updateAcceptedMissions(); updateHiredAgents();
    }

    function generateMission() {
      const m = missions[Math.floor(Math.random()*missions.length)];
      const d = Array.from({ length: 3 }, () => missionDetails[Math.floor(Math.random()*missionDetails.length)]);
      return { mission: m, details: d };
    }

    function showMission() {
      const { mission, details } = generateMission();
      document.getElementById("missionBox").innerHTML = `
        <h3>üóÇ Mission Offer</h3>
        <p><strong>${mission}</strong></p>
        <details><summary>Show Details</summary><div class="details">${details.map(d=>`<p>${d}</p>`).join("")}</div></details>
        <button onclick="acceptMission('${mission.replace(/'/g,"\\'")}',${JSON.stringify(details).replace(/"/g,"&quot;")})">Accept</button>
      `;
    }

    function acceptMission(name, details) {
      acceptedMissions.push({ name, details, status: "Mission accepted" });
      saveState();
      document.getElementById("missionBox").innerHTML = `<p>‚úÖ Mission accepted.</p>`;
    }

    function updateAcceptedMissions() {
      const c = document.getElementById("acceptedMissionsList");
      if (acceptedMissions.length === 0) return c.innerHTML="<p>No missions accepted.</p>";
      c.innerHTML = acceptedMissions.map((m,i)=>`
        <div class="accepted-mission">
          <details><summary>${m.name}</summary><div class="details">${m.details.map(d=>`<p>${d}</p>`).join("")}
            <p class="status"><strong>Status:</strong> ${m.status}</p>
            <button onclick="finishMission(${i})">Mark Completed/Fail</button>
          </div></details>
        </div>`).join("");
    }

    function finishMission(i) {
      const idx = Math.floor(Math.random()*10)===0 ? Math.floor(Math.random()*hiredAgents.length) : -1;
      const overlay = document.getElementById("statusOverlay");
      if (idx >= 0) {
        const lost = hiredAgents.splice(idx,1)[0];
        acceptedMissions.splice(i,1);
        overlay.textContent = `üí• ${lost.name} has been captured! Mission failed.`;
      } else {
        const payout = Math.floor(Math.random()*(145000-50000+1))+50000;
        wallet += payout;
        acceptedMissions.splice(i,1);
        overlay.textContent = `üéâ Mission complete! Here is your payment: ‚Ç¨${payout.toLocaleString()}`;
      }
      overlay.style.display = "flex"; saveState(); updateAcceptedMissions(); updateHiredAgents();
      setTimeout(()=>overlay.style.display="none",3000);
    }

    function showRecruit() {
      currentRecruit = { name:names[Math.random()*names.length|0], age:25+Math.random()*20|0, location:locations[Math.random()*locations.length|0], skill:expertise[Math.random()*expertise.length|0] };
      document.getElementById("recruitContainer").innerHTML = `
        <h3>üîç Recruit Profile</h3>
        <p><strong>Name:</strong> ${currentRecruit.name}</p>
        <p><strong>Age:</strong> ${currentRecruit.age}</p>
        <p><strong>Location:</strong> ${currentRecruit.location}</p>
        <p><strong>Expertise:</strong> ${currentRecruit.skill}</p>
        <button onclick="hireCurrent()">Hire</button>
        <button onclick="showRecruit()">View Next Recruit</button>`;
    }

    function hireCurrent() {
      const cost = Math.floor(Math.random()*(60000-20000+1))+20000;
      if (wallet < cost) return alert("Insufficient funds!");
      wallet -= cost; currentRecruit.status="Active";
      hiredAgents.push(currentRecruit);
      saveState();
      const rc = document.getElementById("recruitContainer");
      rc.innerHTML = `<p>‚úÖ Well done, ${currentRecruit.name} is happy to join (‚Äë‚Ç¨${cost.toLocaleString()})</p>`;
      setTimeout(()=>rc.innerHTML="",3000);
    }

    function updateHiredAgents() {
      const c = document.getElementById("hiredAgentsList");
      if (!hiredAgents.length) return c.innerHTML="<p>No agents hired yet.</p>";
      c.innerHTML = hiredAgents.map(a=>`
        <div class="hired-agent"><strong>${a.name}</strong> ‚Äì ${a.skill}<br/>Age: ${a.age}, Loc: ${a.location}</div>`).join("");
    }

    loadState(); renderWallet(); updateAcceptedMissions(); updateHiredAgents(); showMission();
  </script>
</body>
</html>