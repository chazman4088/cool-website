<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Agent Dashboard</title>
  <style>
    body { background:#0d0d0d; color:#00ffcc; font-family:'Courier New', monospace; margin:0; }
    header { background:#000; padding:10px 20px; display:flex; justify-content:space-between; align-items:center; border-bottom:2px solid #00ffcc; z-index:1001; position:relative; }
    .menu-toggle { background:#00ffcc; color:#000; border:none; padding:10px; font-weight:bold; cursor:pointer; }
    .side-menu { position:fixed; top:0; right:-320px; width:320px; height:100%; background:#000; border-left:2px solid #00ffcc; padding:20px; transition:right .3s ease; overflow-y:auto; z-index:1000; }
    .side-menu.open { right:0; }
    .close-btn { background:none; border:none; color:#00ffcc; font-size:1.5em; cursor:pointer; float:right; }
    .section-box { padding:20px; max-width:600px; margin:20px auto; background:rgba(0,255,204,0.05); border:1px solid #00ffcc; }
    .card { border:1px solid #00ffcc; padding:10px; margin:10px 0; }
    .tabs { display:flex; gap:10px; margin-bottom:10px; }
    .tab { flex:1; text-align:center; padding:8px; background:#111; cursor:pointer; }
    .tab.active { background:#00ffcc; color:#000; }
    button { background:#00ffcc; color:#000; border:none; padding:8px 16px; margin:6px; cursor:pointer; }
    button:hover { background:#00ccb3; }
    input { width:80%; padding:6px; margin:6px 0; }
    #statusOverlay { position:fixed; top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.85);color:#00ffcc;display:none;align-items:center;justify-content:center;text-align:center;font-size:1.2rem;z-index:2000;}
  </style>
</head>
<body>
  <header>
    <h2>üïµÔ∏è Agent Dashboard</h2>
    <div>
      <span id="wallet">üí∞ ‚Ç¨0</span>
      <button class="menu-toggle" onclick="toggleMenu()">‚ò∞ Menu</button>
    </div>
  </header>

  <div id="sideMenu" class="side-menu">
    <button class="close-btn" onclick="toggleMenu()">‚Üê</button>
    <h3>‚úÖ Missions</h3><div id="missionsList"></div><hr>
    <h3>üßë Recruits</h3><div id="recruitsList"></div>
  </div>

  <div id="mainContent">
    <div class="section-box">
      <div><strong>üñ•Ô∏è PCs Owned:</strong> <span id="pcCount">0</span> &nbsp;|&nbsp; <strong>üí∏ Income/sec:</strong> ‚Ç¨<span id="pcIncome">0</span></div>
    </div>
    <div class="section-box" id="missionBox"></div>
    <div class="section-box" id="recruitBox"></div>
    <div class="section-box" id="stockBox"></div>
    <div class="section-box">
      <button onclick="showShop()">üõí Shop</button>
    </div>
    <div class="section-box" id="shopBox" style="display:none;">
      <div class="tabs">
        <div class="tab active" id="tab-Cars" onclick="selectShop('Cars')">Cars</div>
        <div class="tab" id="tab-Houses" onclick="selectShop('Houses')">Houses</div>
        <div class="tab" id="tab-Weapons" onclick="selectShop('Weapons')">Weapons</div>
        <div class="tab" id="tab-PCs" onclick="selectShop('PCs')">Crypto PCs</div>
      </div>
      <div id="shopContent"></div>
    </div>
  </div>

  <div id="statusOverlay"></div>

  <script>
    // STATE
    let wallet=100000, pcCount=0, missions=[], recruits=[], shopItems={Cars:[],Houses:[],Weapons:[],PCs:[]}, shopTab='Cars';
    let currentMission=null, currentRecruit=null, currentStock=null;

    const missionTemplates=["Intercept enemy transmission","Surveil high-value target","Extract compromised agent","Infiltrate secure facility","Plant tracking device","Retrieve encrypted data","Neutralize rogue operative","Secure secret package"];
    const stockNames=["ACME Corp","Global Dynamics","Zenith Tech","Nova Energy","Quantum Systems","Helix Pharma"];
    const carNames=["Phantom","Eclipse","Falcon","Striker","Specter"];
    const houseNames=["Villa Grande","Oak Manor","Sky High","Lakeside Retreat","Hilltop Estate"];
    const weaponNames=["Nightshade","Reaper","Vanguard","Specter","Talion"];

    function random(min,max){return Math.floor(Math.random()*(max-min+1))+min;}

    function saveState(){
      localStorage.setItem("agentDash",JSON.stringify({wallet,pcCount,missions,recruits,shopItems}));
    }
    function loadState(){
      const d=JSON.parse(localStorage.getItem("agentDash")||"{}");
      wallet=d.wallet||wallet;
      pcCount=d.pcCount||pcCount;
      missions=d.missions||missions;
      recruits=d.recruits||recruits;
      shopItems=d.shopItems||shopItems;
    }

    function updateWallet(){
      document.getElementById("wallet").innerText="üí∞ ‚Ç¨"+wallet.toLocaleString();
      updatePCDisplay();
      saveState();
    }
    function updatePCDisplay(){
      document.getElementById("pcCount").innerText=pcCount;
      document.getElementById("pcIncome").innerText=(pcCount*1000).toLocaleString();
    }
    setInterval(()=>{
      if(pcCount>0) { wallet += pcCount*1000; updateWallet(); }
    },1000);

    function toggleMenu(){
      document.getElementById("sideMenu").classList.toggle("open");
      renderLists();
    }

    // Missions
    function offerMission(){
      currentMission={text:missionTemplates[random(0,missionTemplates.length-1)],details:"Top-secret briefing",payout:random(50000,145000)};
      currentRecruit=currentStock=null; renderSections();
    }
    function acceptMission(){
      missions.push({...currentMission});
      currentMission=null; renderSections(); renderLists(); saveState();
    }
    function completeMission(idx){
      const m=missions.splice(idx,1)[0];
      const isMIA=Math.random()<0.1 && recruits.length>0;
      showOverlay(()=>{
        if(isMIA){
          const lost=recruits.splice(random(0,recruits.length-1),1)[0];
          return `üò¢ ${lost.name} captured ‚Äî mission failed.`;
        }
        wallet += m.payout;
        return `‚úÖ Mission complete! Payout: ‚Ç¨${m.payout.toLocaleString()}`;
      },()=>{
        updateWallet(); renderLists(); saveState();
      });
    }

    function renderLists(){
      const ml=missions.map((m,i)=>`<div class="card"><strong>${m.text}</strong><br>Payout: ‚Ç¨${m.payout.toLocaleString()}<br><button onclick="completeMission(${i})">Mark Completed</button></div>`).join("")||"<p>No missions</p>";
      document.getElementById("missionsList").innerHTML=ml;

      const rl=recruits.map(r=>`<div class="card"><strong>${r.name}</strong><br>${r.skill}, Age ${r.age}<br>${r.location}</div>`).join("")||"<p>No recruits hired</p>";
      document.getElementById("recruitsList").innerHTML=rl;
    }

    function renderSections(){
      document.getElementById("missionBox").innerHTML=currentMission?`<div class="card"><h3>${currentMission.text}</h3><p>${currentMission.details}</p><p><strong>Payout:</strong> ‚Ç¨${currentMission.payout.toLocaleString()}</p><button onclick="acceptMission()">Accept</button></div>`:"";
      document.getElementById("recruitBox").innerHTML=currentRecruit?`<div class="card"><h3>${currentRecruit.name}</h3>Age ${currentRecruit.age}, ${currentRecruit.location}<br>Skill: ${currentRecruit.skill}<br><strong>Cost:</strong> ‚Ç¨${currentRecruit.cost.toLocaleString()}<br><button onclick="hireRecruit()">Hire</button><button onclick="showRecruit()">Next</button></div>`:"";
      document.getElementById("stockBox").innerHTML=currentStock?`<div class="card"><h3>${currentStock.name}</h3><p>Invest amount: ‚Ç¨<input id="stockAmt" type="number"/></p><button onclick="investStock()">Invest</button></div>`:"";
    }

    // Recruits
    function showRecruit(){
      currentRecruit={name:stockNames[random(0,stockNames.length-1)]+" Agent", age:random(25,45), location:["Berlin","Tokyo","NYC","Paris","Cairo","Moscow"][random(0,6)], skill:["Assassination","Stealth","Hacking"][random(0,2)], cost:random(20000,60000)};
      currentMission=currentStock=null; renderSections();
    }
    function hireRecruit(){
      if(wallet<currentRecruit.cost)return alert("Insufficient funds");
      wallet-=currentRecruit.cost;
      recruits.push({...currentRecruit});
      showOverlay(`üéâ Hired ${currentRecruit.name} for ‚Ç¨${currentRecruit.cost.toLocaleString()}`,()=>{
        updateWallet(); renderLists(); currentRecruit=null; renderSections(); showRecruit(); saveState();
      });
    }

    // Stocks
    function showStock(){
      currentStock={name:stockNames[random(0,stockNames.length-1)]};
      currentMission=currentRecruit=null; renderSections();
    }
    function investStock(){
      const amt=Number(document.getElementById("stockAmt").value);
      if(!amt||amt<1||amt>wallet)return alert("Invalid amount");
      const pct=random(78,200), result=Math.round(amt*pct/100);
      wallet+=(result-amt);
      showOverlay(()=>{
        if(pct>100)return `üìà You got ‚Ç¨${result.toLocaleString()} (${pct}%)`;
        if(pct===100)return "üìä Market flat";
        return `üìâ You lost ‚Ç¨${(amt-result).toLocaleString()}`;
      },()=>{
        updateWallet(); currentStock=null; renderSections(); saveState();
      });
    }

    // Shop
    function showShop(){
      document.getElementById("shopBox").style.display="block";
      if(!shopItems.Cars.length) initShop();
      selectShop(shopTab);
    }
    function initShop(){
      ['Cars','Houses','Weapons','PCs'].forEach(cat=>generateShop(cat));
    }
    function generateShop(cat){
      if(cat==='PCs'){
        shopItems.PCs=[{name:"Crypto PC",cost:30000}];
      } else {
        const base = cat==='Cars'?carNames:(cat==='Houses'?houseNames:weaponNames);
        shopItems[cat]=Array.from({length:5},(_,i)=>({name:base[random(0,base.length-1)]+"#"+(i+1),cost: cat==='Cars'?random(100000,2000000):(cat==='Houses'?random(500000,5000000):random(10000,100000))}));
      }
      saveState();
    }
    function selectShop(cat){
      shopTab=cat;
      document.querySelectorAll('.tab').forEach(t=>t.classList.toggle('active',t.id==='tab-'+cat));
      renderShop();
    }
    function renderShop(){
      const cont=document.getElementById("shopContent");
      const arr=shopItems[shopTab]||[];
      cont.innerHTML=(arr.length?arr.map((it,i)=>`<div class="card"><strong>${it.name}</strong><br>Cost: ‚Ç¨${it.cost.toLocaleString()}<br><button onclick="buyItem('${shopTab}',${i})">Buy</button></div>`).join(""):`<p>Out of stock! Restocking soon...</p>`);
      if(!arr.length) setTimeout(()=>{generateShop(shopTab);renderShop();},120000);
    }
    function buyItem(cat,i){
      const item=shopItems[cat][i];
      if(wallet<item.cost)return alert("Insufficient funds");
      wallet-=item.cost;
      if(cat==='PCs')pcCount++;
      showOverlay(`üëç Bought ${item.name} for ‚Ç¨${item.cost.toLocaleString()}`,()=>{
        updateWallet(); shopItems[cat].splice(i,1); saveState(); renderShop();
      });
    }

    function showOverlay(msg,cb){
      const o=document.getElementById("statusOverlay");
      o.textContent=msg; o.style.display='flex';
      setTimeout(()=>{o.style.display='none'; cb&&cb();},3000);
    }

    // INIT
    loadState();
    updateWallet();
    renderLists();
    showRecruit();
    offerMission();
  </script>
</body>
</html>